<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
		<!-- MappingFactory classes -->
		<parameter key="erato_framework.metadata.mapping_factory_collection.class">Clio\Component\Util\Metadata\Mapping\Factory\Collection</parameter>
		<parameter key="erato_framework.metadata.attribute_map_mapping_factory.class">Erato\Core\Metadata\Mapping\Factory\AttributeMapMappingFactory</parameter>
		<parameter key="erato_framework.metadata.tag_set_mapping_factory.class">Erato\Core\Metadata\Mapping\Factory\TagSetMappingFactory</parameter>
		<parameter key="erato_framework.metadata.accessor_mapping_factory.class">Erato\Core\Metadata\Mapping\Factory\AccessorMappingFactory</parameter>
		<parameter key="erato_framework.metadata.normalizer_mapping_factory.class">Erato\Core\Metadata\Mapping\Factory\NormalizerMappingFactory</parameter>
    </parameters>

	<services>
		<service
			id="erato_framework.metadata.default_mapping_factory.attribute_map"
			class="%erato_framework.metadata.attribute_map_mapping_factory.class%"
		>
			<argument>attributes</argument>
			<argument>Clio\Component\Util\Attribute\SimpleAttribute</argument>
		</service>

		<service
			id="erato_framework.metadata.default_mapping_factory.tag_set"
			class="%erato_framework.metadata.tag_set_mapping_factory.class%"
		>
			<argument>tags</argument>
			<argument>Clio\Component\Util\Tag\SimpleTag</argument>
		</service>
		
		<service
			id="erato_framework.metadata.default_mapping_factory.accessor"
			class="%erato_framework.metadata.accessor_mapping_factory.class%"
		>
			<argument type="service" id="erato_framework.accessor.schema_accessor_factory" on-invalid="null"/>
			<argument type="service" id="erato_framework.accessor.field_accessor_factory" on-invalid="null"/>
		</service>

		<service
			id="erato_framework.metadata.default_mapping_factory.normalizer"
			class="%erato_framework.metadata.normalizer_mapping_factory.class%"
		>
			<argument type="service" id="erato_framework.normalizer" on-invalid="null"/>
		</service>

		<!-- Mapping Factory -->
		<service
			id="erato_framework.metadata.mapping_factory.collection"
			class="%erato_framework.metadata.mapping_factory_collection.class%"
		>
		</service>
	</services>	
</container>

